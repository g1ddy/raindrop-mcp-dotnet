# Technical Reference

This document provides a detailed reference for the technical components of the Raindrop MCP server. For a more hands-on guide, see the [Tutorial](./TUTORIAL.md) or [How-To Guide](./HOW_TO.md).

-   [Back to Home](../README.md)

---

## **Project Structure**

This is a high-level overview of the most important files and directories in the `src/Mcp` project.

-   **`Program.cs`**: The entry point of the application. Configures and runs the MCP host.
-   **`RaindropServiceCollectionExtensions.cs`**: An extension method to register all the Raindrop.io services with the DI container.
-   **`/Collections`, `/Highlights`, etc.:** Each directory contains the models, API interface, and MCP tools for a specific Raindrop.io resource.
-   **`/Common`**: Contains shared models and base classes used across the project.
-   **`appsettings.json`**: Used for configuration, such as API keys.

---

### **MCP Tools**
<!-- START: MCP_TOOLS -->
_This section is auto-generated by the scripts/generate-docs.ps1 script. Do not edit it manually._

#### `Update Collection`
- **Description:** Updates an existing collection.
- **Usage:** `UpdateCollectionAsync [id] [collection]`

#### `Merge Collections`
- **Description:** Merge multiple collections into a destination collection. Requires both the target collection ID and an array of source collection IDs to merge.
- **Usage:** `MergeCollectionsAsync [to] [ids]`

#### `List Collections`
- **Description:** Retrieves all top-level (root) collections. Use this to understand your collection hierarchy before making structural changes.
- **Usage:** `ListCollectionsAsync `

#### `List Child Collections`
- **Description:** Retrieves all nested (child) collections.
- **Usage:** `ListChildCollectionsAsync `

#### `Get Collection`
- **Description:** Retrieves a single collection by its unique ID.
- **Usage:** `GetCollectionAsync [id]`

#### `Delete Collection`
- **Description:** Removes a collection. Bookmarks within it are moved to the Trash.
- **Usage:** `DeleteCollectionAsync [id]`

#### `Create Collection`
- **Description:** Creates a new collection. To create a subcollection, include a parent object in the collection parameter.
- **Usage:** `CreateCollectionAsync [collection]`

#### `Get Available Filters`
- **Description:** Retrieves available filters for a specific collection or all bookmarks.
- **Usage:** `GetAvailableFiltersAsync [collectionId] [tagsSort] [search]`

#### `Update Highlight`
- **Description:** Updates an existing highlight on a bookmark.
- **Usage:** `UpdateHighlightAsync [raindropId] [request]`

#### `List Highlights By Collection`
- **Description:** Retrieves highlights in a specific collection.
- **Usage:** `ListHighlightsByCollectionAsync [collectionId] [page] [perPage]`

#### `List Highlights`
- **Description:** Retrieves all highlights across all bookmarks.
- **Usage:** `ListHighlightsAsync [page] [perPage]`

#### `Get Bookmark Highlights`
- **Description:** Retrieves all highlights for a specific bookmark.
- **Usage:** `GetBookmarkHighlightsAsync [raindropId]`

#### `Delete Highlight`
- **Description:** Removes a highlight from a bookmark.
- **Usage:** `DeleteHighlightAsync [raindropId] [highlightId]`

#### `Create Highlight`
- **Description:** Adds a new highlight to a bookmark.
- **Usage:** `CreateHighlightAsync [raindropId] [request]`

#### `Update Bookmarks`
- **Description:** Bulk update bookmarks in a collection. For precise targeting, use the ids parameter in the update object.
- **Usage:** `UpdateBookmarksAsync [collectionId] [update] [nested] [search]`

#### `Update Bookmark`
- **Description:** Updates an existing bookmark.
- **Usage:** `UpdateBookmarkAsync [id] [request]`

#### `List Bookmarks`
- **Description:** Retrieves a list of bookmarks from a specific collection. For large collections, use pagination with perPage=50 to retrieve all bookmarks.
- **Usage:** `ListBookmarksAsync [collectionId] [search] [sort] [page] [perPage] [nested]`

#### `Get Bookmark`
- **Description:** Retrieves a single bookmark by its unique ID.
- **Usage:** `GetBookmarkAsync [id]`

#### `Delete Bookmark`
- **Description:** Moves a bookmark to the Trash.
- **Usage:** `DeleteBookmarkAsync [id]`

#### `Create Bookmarks`
- **Description:** Creates multiple bookmarks in a single request.
- **Usage:** `CreateBookmarksAsync [collectionId] [raindrops]`

#### `Create Bookmark`
- **Description:** Creates a new bookmark.
- **Usage:** `CreateBookmarkAsync [request]`

#### `Rename Tags`
- **Description:** Merges multiple tags into a single destination tag.
- **Usage:** `RenameTagsAsync [tags] [newTag] [collectionId]`

#### `Rename Tag`
- **Description:** Renames a tag across all bookmarks.
- **Usage:** `RenameTagAsync [oldTag] [newTag] [collectionId]`

#### `List Tags`
- **Description:** Retrieves all tags, optionally filtered by a collection.
- **Usage:** `ListTagsAsync [collectionId]`

#### `Delete Tags`
- **Description:** Removes one or more tags from all bookmarks.
- **Usage:** `DeleteTagsAsync [tags] [collectionId]`

#### `Delete Tag`
- **Description:** Removes a tag from all bookmarks.
- **Usage:** `DeleteTagAsync [tag] [collectionId]`

#### `Get User Info`
- **Description:** Retrieves the details of the currently authenticated user.
- **Usage:** `GetUserInfoAsync `

<!-- END: MCP_TOOLS -->
---

## **Configuration (`appsettings.json`)**

| Key                 | Type     | Description                                                                    |
| :------------------ | :------- | :----------------------------------------------------------------------------- |
| `Raindrop:ApiToken` | `string` | **Required.** Your personal API token from the Raindrop.io developer settings. |

---

## **Core Classes & Interfaces**

-   **`ICollectionsApi`**: Interface defining the contract for interacting with the Raindrop.io Collections API.
-   **`CollectionsTools`**: Implements the MCP tools related to collections.
-   **`RaindropToolBase`**: A base class for tool containers, providing common functionality.

For more details on the architecture, see the [Explanation](./EXPLANATION.md) document.
